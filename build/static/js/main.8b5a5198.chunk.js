(this.webpackJsonpgourmand=this.webpackJsonpgourmand||[]).push([[0],{32:function(e,t,n){},33:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var c=n(4),a=n(2),r=n.n(a),o=n(10),i=n.n(o),s=(n(31),n(32),n(9)),u=(n.p,n(33),n(47)),l=n(48),j=n(49),d=n(50),b=n(51),h=n(45),f=n(46);var O=function(e){var t=e.requestLocation;return Object(c.jsx)(h.a,{className:"suggestions-list-group",onMouseDown:function(e){return e.preventDefault()},children:Object(c.jsx)(f.a,{tag:"button",onClick:t,action:!0,children:Object(c.jsxs)("div",{className:"current-location-container",children:[Object(c.jsx)("img",{className:"current-location-icon",src:"cursor-fill.svg"}),Object(c.jsx)("span",{children:"Current Location"})]})})})};var g=function(e){var t=e.onSearchRequest,n=e.searching,r=Object(a.useState)(""),o=Object(s.a)(r,2),i=o[0],h=o[1],f=Object(a.useState)(""),g=Object(s.a)(f,2),m=g[0],p=g[1],v=Object(a.useState)(!1),x=Object(s.a)(v,2),y=x[0],D=x[1],I=function(){return D(!1)};return Object(c.jsx)("form",{className:"search-form",onSubmit:function(e){return function(e,t){e.preventDefault(),console.log("onSubmit()"),console.log("e:",e);var n=Object(s.a)(e.target,2),c=n[0],a=n[1];t(c.value,a.value)}(e,t)},children:Object(c.jsxs)(u.a,{className:"input-container px-0",children:[Object(c.jsxs)(l.a,{children:[Object(c.jsx)(j.a,{xs:"3",children:Object(c.jsx)("p",{children:"Description:"})}),Object(c.jsx)(j.a,{children:Object(c.jsx)("input",{className:"search-input",type:"text",value:i,onChange:function(e){h(e.target.value)},placeholder:"e.g. Pizza"})})]}),Object(c.jsxs)(l.a,{children:[Object(c.jsx)(j.a,{xs:"3",children:Object(c.jsx)("p",{children:"Location:"})}),Object(c.jsxs)(j.a,{children:[Object(c.jsx)("input",{className:"search-input",type:"text",value:m,onChange:function(e){p(e.target.value)},onClick:function(){return D((function(e){return!e}))},onBlur:I,placeholder:"e.g. Brooklyn, NY 11237"}),y&&Object(c.jsx)(O,{requestLocation:function(){console.log("Requesting location."),navigator.geolocation.getCurrentPosition((function(e){var t=e.coords,n=t.latitude,c=t.longitude;p("".concat(n.toPrecision(7),", ").concat(c.toPrecision(7))),I()}),(function(e){return console.error(e)}))}})]})]}),Object(c.jsx)(l.a,{children:Object(c.jsx)(j.a,{className:"search-button-container",children:Object(c.jsx)(d.a,{className:"search-button",color:"primary",children:n?Object(c.jsx)(b.a,{color:"light",size:"sm"}):"Search"})})})]})})},m=n(15),p=n(12),v=n(13),x=n(25),y=n(24),D=function(e){Object(x.a)(n,e);var t=Object(y.a)(n);function n(e,c,a,r){return Object(p.a)(this,n),t.call(this,e,c,a,r)}return Object(v.a)(n,[{key:"getThumbnailURLs",value:function(){var e=this.source.slice(0,-5);return[e+"258s.jpg",e+"300s.jpg",e+"348s.jpg"]}}]),n}(function(){function e(t,n,c,a){Object(p.a)(this,e),this.id=t,this.type=n,this.caption=c,this.source=a}return Object(v.a)(e,[{key:"toJSON",value:function(){return m.a.pick(this,"id","type","caption","source")}},{key:"populateFromBSON",value:function(e){var t=e.id,n=e.type,c=e.caption,a=e.source;return this.id=t,this.type=n,this.caption=c,this.source=a,this}}]),e}());var I=function(e){var t=e.restaurants,n=e.onMediaSelection,r=Object(a.useState)([]),o=Object(s.a)(r,2),i=o[0],u=o[1];return Object(a.useEffect)((function(){u(function(e){console.log("restaurants:",e);var t=e.flatMap((function(e){return e.media}));return console.log("allMedia:",t),m.a.shuffle(t).map((function(e){return(new D).populateFromBSON(e)}))}(t))}),[t]),Object(c.jsx)("div",{className:"gallery-container",children:i.map((function(e,t){return Object(c.jsx)("img",{className:"food-media thumbnail",src:e.getThumbnailURLs()[0],onClick:function(){return n(e.id)}},t)}))})},N=n(55),B=n(52),S=n(53),k=n(54);function C(e){return e?'"'.concat(e,'"'):"[ No Caption ]"}function M(e,t){var n;e.preventDefault(),n=function(e){return"https://www.google.com/maps/place/"+e.join(" ").replace(" ","+")}(t),window.open(n,"_blank").focus()}var R=function(e){var t=e.selected,n=e.onClose;console.log("selected:",t);var a=t.media,r=t.restaurant,o=a.source,i=a.caption,s=r.name,u=r.address,l=r.neighborhoods,j=r.categories,b=r.rating;return Object(c.jsxs)(N.a,{isOpen:!!t,toggle:n,className:"media-modal-container",children:[Object(c.jsx)(B.a,{toggle:n,children:Object(c.jsx)("div",{className:"caption",children:C(i)})}),Object(c.jsx)(S.a,{children:Object(c.jsxs)("div",{className:"modal-info-container",children:[Object(c.jsx)("img",{className:"food-media modal-image",src:o}),Object(c.jsxs)("div",{className:"restaurant-details-container",children:[s&&Object(c.jsx)("div",{className:"restaurant-name",children:s}),u&&Object(c.jsx)("a",{onClick:function(e){return M(e,u)},className:"restaurant-address",children:u.join(" ")}),l&&Object(c.jsx)("div",{className:"restaurant-neighborhoods",children:l.join(", ")}),j&&Object(c.jsx)("div",{className:"restaurant-categories",children:j.join(", ")}),b&&Object(c.jsx)("div",{className:"restaurant-rating",children:b})]})]})}),Object(c.jsx)(k.a,{children:Object(c.jsx)(d.a,{color:"secondary",onClick:n,children:"Close"})})]})},w=n(18),L={restaurantsByID:{},mediaByID:{},restaurantIDsByMediaID:{}};function q(e,t){return Object(w.a)(Object(w.a)({},e),t)}var F=new(function(){function e(){Object(p.a)(this,e)}return Object(v.a)(e,[{key:"update",value:function(e){!function(e,t){e.restaurantsByID=q(e.restaurantsByID,function(e){return e.reduce((function(e,t){return e[t.id]=t,e}),{})}(t)),e.mediaByID=q(e.mediaByID,function(e){return e.flatMap((function(e){return e.media})).reduce((function(e,t){return e[t.id]=t,e}),{})}(t)),e.restaurantIDsByMediaID=q(e.restaurantIDsByMediaID,function(e){return e.reduce((function(e,t){return q(e,function(e){return e.media.reduce((function(t,n){return t[n.id]=e.id,t}),{})}(t))}),{})}(t))}(L,e)}},{key:"getMediaByID",value:function(e){return L.mediaByID[e]}},{key:"getRestaurantByID",value:function(e){return L.restaurantsByID[e]}},{key:"getRestaurantIDByMediaID",value:function(e){return L.restaurantIDsByMediaID[e]}}]),e}());function P(e,t,n){if(console.log("updateSearchURL()"),console.log("description:",e),console.log("location:",t),t){var c=function(e,t){return"/search?description=".concat(encodeURIComponent(e),"&location=").concat(encodeURIComponent(t))}(e,t);return console.log("url:",c),n(c)}}function U(e,t){return{media:t.getMediaByID(e),restaurant:t.getRestaurantByID(t.getRestaurantIDByMediaID(e))}}var T=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)([]),i=Object(s.a)(o,2),u=i[0],l=i[1],j=Object(a.useState)(""),d=Object(s.a)(j,2),b=d[0],h=d[1],f=Object(a.useState)(!1),O=Object(s.a)(f,2),m=O[0],p=O[1];return console.log("selectedMediaID:",b),Object(a.useEffect)((function(){n&&(console.log("Making request:",n),p(!0),fetch(n).then((function(e){return e.json()})).then((function(e){F.update(e),console.log("lookup:",F),l(e),p(!1)})))}),[n]),Object(c.jsxs)("div",{className:"App",children:[Object(c.jsxs)("div",{className:"header-container",children:[Object(c.jsx)("h1",{className:"title-header",children:"Gourmand"}),Object(c.jsx)(g,{onSearchRequest:function(e,t){return P(e,t,r)},searching:m})]}),b&&Object(c.jsx)(R,{selected:U(b,F),onClose:function(){return h("")}}),Object(c.jsx)(I,{restaurants:u,onMediaSelection:h})]})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,56)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),r(e),o(e)}))};i.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(T,{})}),document.getElementById("root")),z()}},[[44,1,2]]]);
//# sourceMappingURL=main.8b5a5198.chunk.js.map