{"version":3,"sources":["logo.svg","components/Suggestions.js","components/SearchForm.js","components/Header.js","scrapers/yelp/YelpMedia.js","domain/Media.js","components/utils/getLikedMediaIcon.js","components/GalleryMedia.js","components/SearchCurtain.js","components/Gallery.js","components/ErrorMessage.js","components/utils/getUnlikedMediaIcon.js","components/MediaModal.js","lookup/Lookup.js","storage/Storage.js","storage/NullStorage.js","storage/StorageFactory.js","user/LikedMedia.js","App.js","reportWebVitals.js","index.js"],"names":["Suggestions","requestLocation","ListGroup","className","onMouseDown","e","preventDefault","ListGroupItem","tag","onClick","action","src","SearchForm","onSearchRequest","useState","description","setDescription","requestingLocation","setRequestingLocation","location","setLocation","suggestionsOpen","setSuggestionsOpen","hideSuggestions","onSubmit","console","log","target","descriptionInput","locationInput","value","InputGroup","InputGroupAddon","addonType","Input","type","onChange","event","placeholder","getLocationIconSource","prevState","onBlur","navigator","geolocation","getCurrentPosition","coords","latitude","longitude","toPrecision","error","Button","Header","isOpen","setIsOpen","Navbar","color","light","expand","NavbarBrand","href","NavbarToggler","Collapse","in","timeout","navbar","Nav","NavItem","NavLink","YelpMedia","id","caption","source","stem","this","slice","_","pick","bson","width","height","xmlns","fill","viewBox","d","delays","GalleryMedia","media","onMediaSelection","isLiked","delayIndex","searching","Math","floor","random","length","delay","getThumbnailURLs","getLikedMediaIcon","SearchCurtain","Spinner","Gallery","restaurants","isLikedMedia","canShuffleMedia","setCanShuffleMedia","shuffledMedia","setShuffledMedia","canEnter","setCanEnter","canRender","useEffect","allMedia","flatMap","restaurant","shuffle","map","populateFromBSON","getShuffledMedia","CSSTransition","classNames","appear","onExit","onExited","i","ErrorMessage","message","formatCaption","onAddressClick","address","url","join","replace","formatMapLink","window","open","focus","MediaModal","selected","onMediaLikeToggle","onClose","name","neighborhoods","categories","rating","onIconClick","Modal","toggle","ModalHeader","ModalBody","getUnlikedMediaIcon","ModalFooter","lookup","restaurantsByID","mediaByID","restaurantIDsByMediaID","Lookup","combineMaps","reduce","updateRestaurantsByID","updateMediaByID","mapMediaIDtoRestaurantID","updateRestaurantIDsByMediaID","updateLookup","existing","update","Storage","storage","key","silent","getItem","prop","setItem","removeItem","clear","debug","NullStorage","StorageFactory","localStorage","LikedMedia","data","liked","json","JSON","parse","restaurantID","Set","hydrate","setLiked","delete","size","unlikeMedia","add","likeMedia","serialize","set","stringify","has","get","likedMedia","getLikedMedia","getRestaurantIDByMediaID","updateSearchURL","setURL","encodeURIComponent","createSearchURL","getSelectedMediaInfo","selectedID","getMediaByID","getRestaurantByID","checkResponseForErrors","response","ok","Error","statusText","App","setRestaurants","selectedMediaID","setSelectedMediaID","setLikedMedia","setSearching","setError","fetch","then","scroll","top","left","behavior","catch","getAll","toggleLikedMedia","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.36e2c408.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.103b5fa1.svg\";","import { ListGroup, ListGroupItem } from 'reactstrap';\r\n\r\n/*\r\n The parent search form hides suggestions on blur events from the location input, removing this component from the DOM before the click handler of this component can fire.  To mitigate, prevent default on mousedown.\r\n*/\r\nfunction Suggestions({requestLocation}) {\r\n\treturn  (\r\n\t\t<ListGroup className=\"suggestions-list-group\" onMouseDown={e => e.preventDefault()}>\r\n\t\t\t<ListGroupItem tag=\"button\" onClick={requestLocation} action>\r\n\t\t\t\t<div className=\"current-location-container\">\r\n\t\t\t\t\t<img className=\"current-location-icon\" src=\"cursor-fill.svg\" />\r\n\t\t\t\t\t<span>Current Location</span>\r\n\t\t\t\t</div>\r\n\t\t\t</ListGroupItem>\r\n\t\t</ListGroup>\r\n\t);\r\n}\r\n\r\nexport default Suggestions;","import { useState } from 'react';\r\nimport { Container, Row, Col, Nav, NavItem, Form, InputGroup, InputGroupAddon, Input, Button, Spinner } from 'reactstrap';\r\nimport Suggestions from './Suggestions';\r\n\r\nfunction SearchForm({onSearchRequest}) {\r\n\tconst [description, setDescription] = useState('');\r\n\tconst [requestingLocation, setRequestingLocation] = useState(false);\r\n\tconst [location, setLocation] = useState('');\r\n\tconst [suggestionsOpen, setSuggestionsOpen] = useState(false);\r\n\r\n\tconst onDescriptionChange = (event) => {\r\n\t\tsetDescription(event.target.value);\r\n\t};\r\n\r\n\tconst onLocationChange = (event) => {\r\n\t\tsetLocation(event.target.value);\r\n\t};\r\n  \t\r\n  \tconst toggleSuggestions = () => setSuggestionsOpen(prevState => !prevState);\r\n  \tconst hideSuggestions = () => setSuggestionsOpen(false);\r\n  \tconst getLocationIconSource = (requestingLocation) => requestingLocation ? \"spinner.png\" : \"target.svg\";\r\n  \t\r\n  \tconst requestLocation = (e) => {\r\n  \t\t// Prevent page refresh\r\n  \t\te.preventDefault();\r\n  \t\tconsole.log(\"Requesting location.\");\r\n  \t\tsetRequestingLocation(true);\r\n\t\thideSuggestions();\r\n  \t\tnavigator.geolocation.getCurrentPosition(\r\n\t\t\te => {\r\n\t\t\t\tconst { latitude, longitude } = e.coords;\r\n\t\t\t\tsetRequestingLocation(false);\r\n\t\t\t\tsetLocation(`${latitude.toPrecision(7)}, ${longitude.toPrecision(7)}`);\r\n\t\t\t},\r\n\t\t\te => {\r\n\t\t\t\tsetRequestingLocation(false);\r\n\t\t\t\tconsole.error(e);\r\n\t\t\t});\r\n\t};\r\n\r\n\treturn (\r\n\t\t<form className=\"search-form\" onSubmit={(e) => onSubmit(e, onSearchRequest)}>\r\n\t\t\t<div className=\"input-group-container\">\r\n\t\t\t\t<InputGroup>\r\n\t\t\t\t\t<InputGroupAddon addonType=\"prepend\">\r\n\t\t\t\t\t\t<img className=\"input-icon query-icon\" src=\"magnifying-glass.svg\" />\r\n\t\t\t\t\t</InputGroupAddon>\r\n\t\t\t\t\t<Input className=\"search-input\" type=\"text\" value={description} onChange={onDescriptionChange} placeholder=\"e.g. Pizza\" />\r\n\t\t\t\t</InputGroup>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"input-group-container\">\r\n\t\t\t\t<InputGroup>\r\n\t\t\t\t\t<InputGroupAddon addonType=\"prepend\">\r\n\t\t\t\t\t\t<img className={`input-icon location-icon ${requestingLocation ? \"rotate\" : \"\"}`} src={getLocationIconSource(requestingLocation)} />\r\n\t\t\t\t\t</InputGroupAddon>\r\n\t\t\t\t\t<Input className=\"search-input\" type=\"text\" value={location} onChange={onLocationChange} onClick={toggleSuggestions}\r\n\t\t\t\t\t\tonBlur={hideSuggestions} placeholder=\"e.g. Brooklyn, NY 11237\" />\r\n\t\t\t\t</InputGroup>\r\n\t\t\t\t{suggestionsOpen && <Suggestions requestLocation={requestLocation} />}\r\n\t\t\t</div>\r\n\t\t\t<Button className=\"search-submit-button hidden-submit\" type=\"submit\"></Button>\r\n\t\t</form>\r\n\t);\r\n}\r\n\r\nfunction onSubmit(e, onSearchRequest) {\r\n\te.preventDefault();\r\n\tconsole.log(\"onSubmit()\");\r\n\tconsole.log(\"e:\", e);\r\n\tconst [descriptionInput, locationInput] = e.target;\r\n\tonSearchRequest(descriptionInput.value, locationInput.value);\r\n}\r\n\r\nexport default SearchForm;\r\n","import { useState } from 'react';\r\nimport {\r\n  Container,\r\n  Col,\r\n  Row,\r\n  Collapse,\r\n  Navbar,\r\n  NavbarToggler,\r\n  NavbarBrand,\r\n  Nav,\r\n  NavItem,\r\n  NavLink,\r\n  NavbarText  // Slogan?\r\n} from 'reactstrap';\r\nimport SearchForm from './SearchForm';\r\n\r\nfunction Header({onSearchRequest}) {\r\n\tconst [isOpen, setIsOpen] = useState(false);\r\n\tconst toggle = () => setIsOpen(!isOpen);\r\n\r\n\treturn (\r\n\t\t<Navbar className=\"header-navbar\" color=\"light\" light expand=\"md\">\r\n\t\t\t<NavbarBrand href=\"/\">Gourmand</NavbarBrand>\r\n        \t<NavbarToggler onClick={toggle} />\r\n        \t<Collapse className=\"header-collapse\" in={true} isOpen={isOpen} timeout={200} navbar>\r\n        \t\t<Nav className=\"header-nav\" navbar>\r\n\t\t\t\t\t<NavItem>\r\n\t\t\t\t\t\t<NavLink href=\"#\">About</NavLink>\r\n\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t<NavItem>\r\n\t\t\t\t\t\t<NavLink href=\"#\">Contact</NavLink>\r\n\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t<NavItem>\r\n\t\t\t\t\t\t<NavLink href=\"#\">Log In</NavLink>\r\n\t\t\t\t\t</NavItem>\t\t\t\t\t\t\t\t\t\t        \t\t\t\r\n\t\t\t\t\t<NavItem>\r\n\t\t\t\t\t\t<SearchForm onSearchRequest={onSearchRequest} />\r\n\t\t\t\t\t</NavItem>\r\n        \t\t</Nav>\r\n        \t</Collapse>\r\n\t\t</Navbar>\r\n\t);\r\n}\r\n\r\nexport default Header;","import Media from '../../domain/Media.js';\r\n\r\nclass YelpMedia extends Media {\r\n\r\n\tconstructor(id, type, caption, source) {\r\n\t\tsuper(id, type, caption, source);\r\n\t}\r\n\r\n\tgetThumbnailURLs() {\r\n\t\tconst stem = this.source.slice(0, -5);\r\n\r\n\t\treturn [\r\n\t\t\tstem + '258s.jpg',\r\n\t\t\tstem + '300s.jpg',\r\n\t\t\tstem + '348s.jpg'\r\n\t\t];\r\n\t}\r\n\r\n}\r\n\r\nexport default YelpMedia","import _ from'underscore';\r\n\r\nexport default class Media {\r\n\r\n\tconstructor(id, type, caption, source) {\r\n\t\tthis.id = id;\r\n\t\tthis.type = type;\r\n\t\tthis.caption = caption;\r\n\t\tthis.source = source;\r\n\t}\r\n\r\n\ttoJSON() {\r\n\t\treturn _.pick(this, 'id', 'type', 'caption', 'source');\r\n\t}\r\n\r\n\tpopulateFromBSON(bson) {\r\n\t\tconst { id, type, caption, source } = bson;\r\n\r\n\t\tthis.id = id;\r\n\t\tthis.type = type;\r\n\t\tthis.caption = caption;\r\n\t\tthis.source = source;\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n}\r\n","export default (width, height, color, onClick = () => {}) => {\r\n\treturn (\r\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width={width} height={height} fill={color} className=\"liked-media-icon\" onClick={onClick} viewBox=\"0 0 16 16\">\r\n\t\t  <path d=\"M4 1c2.21 0 4 1.755 4 3.92C8 2.755 9.79 1 12 1s4 1.755 4 3.92c0 3.263-3.234 4.414-7.608 9.608a.513.513 0 0 1-.784 0C3.234 9.334 0 8.183 0 4.92 0 2.755 1.79 1 4 1z\"/>\r\n\t\t</svg>\r\n\t);\r\n}","import getLikedMediaIcon from './utils/getLikedMediaIcon';\r\n\r\nconst delays = [50, 250, 500, 750, 1000];\r\n\r\nconst GalleryMedia = ({ media, onMediaSelection, isLiked, searching }) => {\r\n\tconst delayIndex = Math.floor(Math.random() * delays.length);\r\n\tconst delay = delays[delayIndex];\r\n\treturn (\r\n\t\t<div className={`food-thumbnail-container transition-delay-${delay}`}>\r\n\t\t\t<img className=\"food-thumbnail\" src={media.getThumbnailURLs()[0]} onClick={() => onMediaSelection(media.id)} />\r\n\t\t\t{ isLiked && getLikedMediaIcon(\"16\", \"16\", \"white\") }\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default GalleryMedia;\r\n","import { Spinner } from 'reactstrap';\r\n\r\nconst SearchCurtain = ({ color }) => {\r\n\treturn (\r\n\t\t<div className=\"search-curtain\">\r\n\t\t\t<div className=\"search-curtain-backdrop\"></div>\r\n\t\t\t<Spinner className=\"search-curtain-spinner\" color={color} />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default SearchCurtain;\r\n","import { useState, useEffect } from 'react';\r\nimport _ from 'underscore';\r\nimport YelpMedia from '../scrapers/yelp/YelpMedia';\r\nimport GalleryMedia from './GalleryMedia';\r\nimport SearchCurtain from './SearchCurtain';\r\nimport { TransitionGroup, CSSTransition } from \"react-transition-group\";\r\n\r\nconst Gallery = ({restaurants, onMediaSelection, isLikedMedia, searching}) => {\r\n\t// console.log(\"media:\", media);\r\n\tconst [canShuffleMedia, setCanShuffleMedia] = useState(true);\r\n\tconst [shuffledMedia, setShuffledMedia] = useState([]);\r\n\tconst [canEnter, setCanEnter] = useState(true);\r\n\tconst color = restaurants.length ? \"light\" : \"dark\";\r\n\tconst canRender = !searching && canEnter;\r\n\tconst onExited = () => {\r\n\t\tsetCanShuffleMedia(true);\r\n\t\tsetCanEnter(true);\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tsetCanShuffleMedia(canRender);\r\n\t}, [searching, canEnter])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (canShuffleMedia) {\r\n\t\t\tsetShuffledMedia(getShuffledMedia(restaurants));\r\n\t\t}\r\n\t}, [canShuffleMedia]);\r\n\r\n\treturn (\r\n\t\t<CSSTransition classNames={\"thumbnail-swap\"} in={canRender} appear={true} timeout={2000} onExit={() => setCanEnter(false)} onExited={onExited}>\r\n\t\t\t<div className=\"gallery-container\">\r\n\t\t\t\t{shuffledMedia.map((media, i) => (\r\n\t\t\t\t\t<GalleryMedia searching={searching} media={media} onMediaSelection={onMediaSelection} isLiked={isLikedMedia(media.id)} />\r\n\t\t\t\t))}\r\n\t\t\t\t{ searching && <SearchCurtain color={color} />}\r\n\t\t\t</div>\r\n\t\t</CSSTransition>\r\n\t);\r\n};\r\n\r\nfunction getShuffledMedia(restaurants) {\r\n\tconsole.log(\"restaurants:\", restaurants);\r\n\tconst allMedia = restaurants.flatMap(restaurant => restaurant.media);\r\n\tconsole.log(\"allMedia:\", allMedia);\r\n\tconst shuffledMedia = _.shuffle(allMedia);\r\n\t// console.log(\"shuffledMedia:\", shuffledMedia);\r\n\treturn shuffledMedia.map(media => (new YelpMedia().populateFromBSON(media)));\r\n}\r\n\r\nexport default Gallery;\r\n","const ErrorMessage = ({error}) => {\r\n\treturn (\r\n\t\t<div className=\"error-message-container\">\r\n\t\t\t<div className=\"error-apology\">Oops, something went sour.</div>\r\n\t\t\t<div className=\"error-message\">\"{error.message}\"</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ErrorMessage;","export default (width, height, color, onClick = () => {}) => {\r\n\treturn (\r\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width={width} height={height} fill={color} className=\"unliked-media-icon\" onClick={onClick} viewBox=\"0 0 16 16\">\r\n\t\t  <path d=\"M8 6.236l-.894-1.789c-.222-.443-.607-1.08-1.152-1.595C5.418 2.345 4.776 2 4 2 2.324 2 1 3.326 1 4.92c0 1.211.554 2.066 1.868 3.37.337.334.721.695 1.146 1.093C5.122 10.423 6.5 11.717 8 13.447c1.5-1.73 2.878-3.024 3.986-4.064.425-.398.81-.76 1.146-1.093C14.446 6.986 15 6.131 15 4.92 15 3.326 13.676 2 12 2c-.777 0-1.418.345-1.954.852-.545.515-.93 1.152-1.152 1.595L8 6.236zm.392 8.292a.513.513 0 0 1-.784 0c-1.601-1.902-3.05-3.262-4.243-4.381C1.3 8.208 0 6.989 0 4.92 0 2.755 1.79 1 4 1c1.6 0 2.719 1.05 3.404 2.008.26.365.458.716.596.992a7.55 7.55 0 0 1 .596-.992C9.281 2.049 10.4 1 12 1c2.21 0 4 1.755 4 3.92 0 2.069-1.3 3.288-3.365 5.227-1.193 1.12-2.642 2.48-4.243 4.38z\"/>\r\n\t\t</svg>\r\n\t);\r\n}","import { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\r\nimport getUnlikedMediaIcon from './utils/getUnlikedMediaIcon';\r\nimport getLikedMediaIcon from './utils/getLikedMediaIcon';\r\n\r\nfunction formatCaption(caption) {\r\n\treturn caption ? `\"${caption}\"` : \"[ No Caption ]\";\r\n}\r\n\r\nfunction onAddressClick(e, address) {\r\n\te.preventDefault();\r\n\topenInNewTab(formatMapLink(address));\r\n}\r\n\r\nfunction openInNewTab(url) {\r\n\tconst win = window.open(url, '_blank');\r\n\twin.focus();\r\n}\r\n\r\nfunction formatMapLink(address) {\r\n\treturn \"https://www.google.com/maps/place/\" + address.join(\" \").replace(\" \", \"+\");\r\n}\r\n\r\nfunction MediaModal({selected, onMediaLikeToggle, onClose, isLiked}) {\r\n\tconsole.log(\"selected:\", selected);\r\n\tconst {media, restaurant} = selected;\r\n\tconst {source, caption} = media;\r\n\tconst {name, address, neighborhoods, categories, rating} = restaurant;\r\n\tconst onIconClick = () => onMediaLikeToggle(media.id);\r\n\r\n\treturn (\r\n\t\t<Modal isOpen={!!selected} toggle={onClose} className=\"media-modal-container\">\r\n\t\t\t<ModalHeader toggle={onClose}>\r\n\t\t\t\t<div className=\"caption\">{formatCaption(caption)}</div>\r\n\t\t\t</ModalHeader>\r\n\t\t\t<ModalBody>\r\n\t\t\t\t<div className=\"modal-info-container\">\r\n\t\t\t\t\t<div className=\"modal-image-container\">\r\n\t\t\t\t\t\t<img className=\"food-media modal-image\" src={source} />\r\n\t\t\t\t\t\t{ isLiked ? getLikedMediaIcon(\"32\", \"32\", \"white\", onIconClick) : getUnlikedMediaIcon(\"32\", \"32\", \"white\", onIconClick) }\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"restaurant-details-container\">\r\n\t\t\t\t\t\t{name && <div className=\"restaurant-name\">{name}</div>}\r\n\t\t\t\t\t\t{address && <a onClick={e => onAddressClick(e, address)} className=\"restaurant-address\">{address.join(\" \")}</a>}\r\n\t\t\t\t\t\t{neighborhoods && <div className=\"restaurant-neighborhoods\">{neighborhoods.join(\", \")}</div>}\r\n\t\t\t\t\t\t{categories && <div className=\"restaurant-categories\">{categories.join(\", \")}</div>}\r\n\t\t\t\t\t\t{rating && <div className=\"restaurant-rating\">{rating}</div>}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t        </ModalBody>\r\n\t        <ModalFooter>\r\n\t\t\t\t<Button color=\"secondary\" onClick={onClose}>Close</Button>\r\n\t\t\t</ModalFooter>\r\n\t\t</Modal>\r\n\t);\r\n}\r\n\r\nexport default MediaModal;\r\n","/*\r\n * Lookup\r\n */\r\n const lookup = { \r\n \trestaurantsByID: {}, \r\n \tmediaByID: {}, \r\n \trestaurantIDsByMediaID: {} \r\n };\r\n\r\nexport default class Lookup {\r\n\tupdate(restaurants) {\r\n\t\tupdateLookup(lookup, restaurants);\r\n\t}\r\n\r\n\tgetMediaByID(id) {\r\n\t\treturn lookup.mediaByID[id];\r\n\t}\r\n\r\n\tgetRestaurantByID(id) {\r\n\t\treturn lookup.restaurantsByID[id];\r\n\t}\r\n\r\n\tgetRestaurantIDByMediaID(id) {\r\n\t\treturn lookup.restaurantIDsByMediaID[id];\r\n\t}\r\n};\r\n\r\nfunction updateLookup(lookup, restaurants) {\r\n\tlookup.restaurantsByID = combineMaps(lookup.restaurantsByID, updateRestaurantsByID(restaurants));\r\n\tlookup.mediaByID = combineMaps(lookup.mediaByID, updateMediaByID(restaurants));\r\n\tlookup.restaurantIDsByMediaID = combineMaps(lookup.restaurantIDsByMediaID, updateRestaurantIDsByMediaID(restaurants));\r\n}\r\n\r\nfunction updateRestaurantsByID(restaurants) {\r\n\treturn restaurants.reduce((map, restaurant) => {\r\n\t\tmap[restaurant.id] = restaurant;\r\n\t\treturn map;\r\n\t}, {});\r\n}\r\n\r\nfunction updateMediaByID(restaurants) {\r\n\treturn restaurants\r\n\t\t.flatMap(restaurant => restaurant.media)\r\n\t\t.reduce((map, media) => {\r\n\t\t\tmap[media.id] = media;\r\n\t\t\treturn map;\r\n\t\t}, {});\r\n}\r\n\r\nfunction updateRestaurantIDsByMediaID(restaurants) {\r\n\treturn restaurants.reduce((map, restaurant) => (combineMaps(map, mapMediaIDtoRestaurantID(restaurant))), {});\r\n}\r\n\r\nfunction mapMediaIDtoRestaurantID(restaurant) {\r\n\treturn restaurant.media\r\n\t\t.reduce((map, media) => {\r\n\t\t\tmap[media.id] = restaurant.id;\r\n\t\t\treturn map;\r\n\t\t}, {});\r\n}\r\n\r\nfunction combineMaps(existing, update) {\r\n\treturn { ...existing, ...update };\r\n}","/*\r\n * Storage\r\n *\r\n * Facade for storage mechanism (e.g. localStorage) \r\n */\r\nexport default class Storage {\r\n\r\n\tconstructor(storage) {\r\n\t\tthis.storage = storage;\r\n\t}\r\n\r\n\tget(key) {\r\n\t\treturn silent(() => this.storage.getItem(key));\r\n\t}\r\n\r\n\tset(key, prop) {\r\n\t\treturn silent(() => this.storage.setItem(key, prop));\r\n\t}\r\n\r\n\tremove(key) {\r\n\t\treturn silent(() => this.storage.removeItem(key));\r\n\t}\r\n\r\n\tremoveAll() {\r\n\t\treturn silent(() => this.storage.clear());\r\n\t}\r\n\r\n}\r\n\r\n/*\r\n * Utility Functions\r\n */\r\nfunction silent(action) {\r\n\ttry {\r\n\t\treturn action();\r\n\t} catch (e) {\r\n\t\twindow.console.debug(\"Storage Exception:\", e);\r\n\t}\r\n}\r\n","/*\r\n * NullStorage\r\n *\r\n * Class returned by 'StorageFactory' if there is no local storage.\r\n */\r\nexport default class NullStorage {\r\n\tget() {}\r\n\tset() {}\r\n\tremove() {}\r\n\tremoveAll() {}\r\n}\r\n","import Storage from './Storage.js';\r\nimport NullStorage from './NullStorage.js';\r\n\r\nexport default class StorageFactory {\r\n\r\n\tget(localStorage) {\r\n\t\treturn localStorage ? new Storage(localStorage) : new NullStorage();\r\n\t}\r\n\r\n}\r\n","/*\r\n\r\n// User: data\r\n{\r\n\tliked: {\r\n\t\t[restaurant id]: Set<id>\r\n\t}\r\n}\r\n\r\n*/\r\nexport default class LikedMedia {\r\n\r\n\tconstructor(data, storage) {\r\n\t\tthis.liked = setLiked(data);\r\n\t\tthis.storage = storage;\r\n\t}\r\n\r\n\ttoggle(restaurantID, id) {\r\n\t\tconst liked = { ...this.liked };\r\n\r\n\t\tthis.liked = isLiked(liked, restaurantID, id)\r\n\t\t\t? unlikeMedia(liked, restaurantID, id)\r\n\t\t\t: likeMedia(liked, restaurantID, id);\r\n\r\n\t\t// TODO: Set up event mechanism for updating storage\r\n\t\tupdateStorage(this.storage, this.serialize());\r\n\t}\r\n\r\n\tgetAll() {\r\n\t\treturn this.liked;\r\n\t}\r\n\r\n\tisLiked(restaurantID, id) {\r\n\t\treturn isLiked(this.liked, restaurantID, id);\r\n\t}\r\n\r\n\tserialize() {\r\n\t\tconst json = {};\r\n\r\n\t\tfor (const restaurantID in this.liked) {\r\n\t\t\tjson[restaurantID] = [...this.liked[restaurantID]];\r\n\t\t}\r\n\r\n\t\treturn JSON.stringify(json);\r\n\t}\r\n}\r\n\r\n/*\r\n * Utility Functions\r\n */\r\nfunction setLiked(data) {\r\n\tif (!(data))\r\n\t\treturn {};\r\n\r\n\t// Assume data is pre-hydrated object if not string\r\n\treturn (typeof data === 'string') ? hydrate(data) : data;\r\n}\r\n\r\nfunction isLiked(liked, restaurantID, id) {\r\n\treturn (restaurantID in liked)\r\n\t\t&& liked[restaurantID].has(id);\r\n}\r\n\r\nfunction likeMedia(liked, restaurantID, id) {\r\n\tif (!(restaurantID in liked)) {\r\n\t\t\tliked[restaurantID] = new Set();\r\n\t}\r\n\r\n\tliked[restaurantID].add(id);\r\n\r\n\treturn liked;\r\n}\r\n\r\nfunction unlikeMedia(liked, restaurantID, id) {\r\n\tliked[restaurantID].delete(id);\r\n\r\n\tif (liked[restaurantID].size === 0) {\r\n\t\tdelete liked[restaurantID];\r\n\t}\r\n\r\n\treturn liked;\r\n}\r\n\r\nfunction updateStorage(storage, data) {\r\n\tstorage.set('likedMedia', data);\r\n}\r\n\r\nfunction hydrate(data) {\r\n\tconst json = JSON.parse(data);\r\n\r\n\tfor (const restaurantID in json) {\r\n\t\tjson[restaurantID] = new Set(json[restaurantID]);\r\n\t}\r\n\r\n\treturn json;\r\n}\r\n","import { useState, useEffect } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport Header from './components/Header';\nimport Gallery from './components/Gallery';\nimport ErrorMessage from './components/ErrorMessage';\nimport MediaModal from './components/MediaModal';\nimport Lookup from './lookup/Lookup';\nimport StorageFactory from './storage/StorageFactory';\nimport LikedMedia from './user/LikedMedia';\n\nconst lookup = new Lookup();\nconst storage = new StorageFactory().get(window.localStorage);\nconst likedMedia = new LikedMedia(getLikedMedia(storage), storage);\n\nfunction getLikedMedia(storage) {\n\ttry {\n\t\treturn storage.get('likedMedia');\n\t} catch (e) {\n\t\twindow.console.debug(e);\n\t}\n}\n\nfunction isLikedMedia(id) {\n\treturn id && likedMedia.isLiked(lookup.getRestaurantIDByMediaID(id), id);\n}\n\nfunction toggleLikedMedia(id, setLikedMedia) {\n\tlikedMedia.toggle(lookup.getRestaurantIDByMediaID(id), id);\n\tsetLikedMedia(likedMedia.getAll());\n}\n\nfunction updateSearchURL(description, location, setURL) {\n\tconsole.log(\"updateSearchURL()\");\n\tconsole.log(\"description:\", description);\n\tconsole.log(\"location:\", location);\n\tif (!location)\n\t\treturn;\n\n\tconst url = createSearchURL(description, location);\n\tconsole.log(\"url:\", url);\n\treturn setURL(url);\n}\n\nfunction createSearchURL(description, location) {\n\treturn `/search?description=${encodeURIComponent(description)}&location=${encodeURIComponent(location)}`;\n}\n\nfunction getSelectedMediaInfo(selectedID, lookup) {\n\tconst media = lookup.getMediaByID(selectedID);\n\tconst restaurant = lookup.getRestaurantByID(lookup.getRestaurantIDByMediaID(selectedID));\n\treturn { media, restaurant };\n}\n\nfunction checkResponseForErrors(response) {\n\tif (response.ok) {\n\t\treturn response;\n\t}\n\n\tthrow Error(response.statusText);\n}\n\nfunction scrollToTop() {\n\twindow.scroll({\n\t\ttop: 0,\n\t\tleft: 0,\n\t\tbehavior: 'smooth'\n\t});\n}\n\nfunction App() {\n\tconst [url, setURL] = useState('');\n\tconst [restaurants, setRestaurants] = useState([]);\n\tconst [selectedMediaID, setSelectedMediaID] = useState('');\n\tconst [likedMedia, setLikedMedia] = useState({});\n\tconst [searching, setSearching] = useState(false);\n\tconst [error, setError] = useState(null);\n\n\tconsole.log(\"selectedMediaID:\", selectedMediaID);\n\tuseEffect(() => {\n\t\tif (url) {\n\t\t\tconsole.log(\"Making request:\", url);\n\t\t\tsetError(null);\n\t\t\tsetSearching(true);\n\n\t\t\tfetch(url)\n\t\t\t\t.then(checkResponseForErrors)\n\t\t\t\t.then(response => response.json())\n\t\t\t\t.then(json => {\n\t\t\t\t\tlookup.update(json);\n\t\t\t\t\tconsole.log(\"lookup:\", lookup);\n\t\t\t\t\tsetRestaurants(json);\n\t\t\t\t\tsetSearching(false);\n\t\t\t\t\tscrollToTop();\n\t\t\t\t})\n\t\t\t\t.catch(e => setError(e));\n\t\t}\n\t}, [url])\n\n\treturn (\n\t\t<div className=\"app\">\n\t\t\t<Header onSearchRequest={(description, location) => updateSearchURL(description, location, setURL)} />\n\t\t\t{selectedMediaID && <MediaModal selected={getSelectedMediaInfo(selectedMediaID, lookup)} onMediaLikeToggle={(id) => toggleLikedMedia(id, setLikedMedia)} onClose={() => setSelectedMediaID('')} isLiked={isLikedMedia(selectedMediaID)} />}\n\t\t\t{error ? <ErrorMessage error={error} /> : <Gallery restaurants={restaurants} onMediaSelection={setSelectedMediaID} isLikedMedia={isLikedMedia} searching={searching} />}\n\t\t</div>\n\t);\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}