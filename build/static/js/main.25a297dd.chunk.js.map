{"version":3,"sources":["scrapers/yelp/constants.js","components/App/Header/SearchForm/Suggestions/Suggestions.js","components/App/Header/SearchForm/SearchForm.js","components/App/Header/ShowLikedCheckbox/ShowLikedCheckbox.js","components/App/Header/DistanceDropdown/DistanceDropdown.js","components/App/Header/Header.js","scrapers/yelp/YelpMedia.js","domain/Media.js","components/utils/getLikedMediaIcon.js","components/App/Gallery/GalleryMedia/GalleryMedia.js","components/App/Gallery/SearchCurtain/SearchCurtain.js","components/App/Gallery/Gallery.js","components/App/ErrorMessage/ErrorMessage.js","components/utils/getUnlikedMediaIcon.js","components/App/MediaModal/MediaModal.js","lookup/Lookup.js","storage/Storage.js","storage/NullStorage.js","storage/StorageFactory.js","user/LikedMedia.js","utils/pipe.js","search/formatSearchURL.js","components/App/App.js","reportWebVitals.js","index.js"],"names":["UNKNOWN","BIRDS_EYE","DRIVING","BIKING","WALKING","BLOCKS","Suggestions","requestLocation","ListGroup","className","onMouseDown","e","preventDefault","ListGroupItem","tag","onClick","action","src","SearchForm","onSearchRequest","description","setDescription","location","setLocation","requestingLocation","setRequestingLocation","useState","suggestionsOpen","setSuggestionsOpen","hideSuggestions","onSubmit","console","log","InputGroup","InputGroupAddon","addonType","Input","type","value","onChange","event","target","placeholder","getLocationIconSource","prevState","onBlur","navigator","geolocation","getCurrentPosition","coords","latitude","longitude","toPrecision","error","timeout","maximumAge","Button","ShowLikedCheckbox","FormGroup","check","Label","checked","distances","constants","dropdownTextContents","DEFAULT","options","getDropdownText","distance","DistanceDropdown","setDistance","isOpen","setIsOpen","Dropdown","toggle","size","outline","color","DropdownToggle","caret","DropdownMenu","positionFixed","DropdownItem","Header","setShowLiked","Navbar","light","expand","NavbarBrand","href","NavbarToggler","Collapse","in","navbar","Nav","NavItem","NavLink","YelpMedia","id","caption","source","stem","this","slice","_","pick","bson","width","height","xmlns","fill","viewBox","d","delays","GalleryMedia","media","onMediaSelection","isLiked","delayIndex","searching","Math","floor","random","length","delay","getThumbnailURLs","getLikedMediaIcon","SearchCurtain","Spinner","Gallery","restaurants","isLikedMedia","showLiked","canShuffleMedia","setCanShuffleMedia","shuffledMedia","setShuffledMedia","canEnter","setCanEnter","canRender","renderedMedia","filter","filterLiked","useEffect","allMedia","flatMap","restaurant","shuffle","map","populateFromBSON","getShuffledMedia","CSSTransition","classNames","appear","onExit","onExited","i","ErrorMessage","message","formatCaption","onAddressClick","address","url","join","replace","formatMapLink","window","open","focus","MediaModal","selected","onMediaLikeToggle","onClose","name","neighborhoods","categories","rating","onIconClick","Modal","ModalHeader","ModalBody","getUnlikedMediaIcon","ModalFooter","lookup","restaurantsByID","mediaByID","restaurantIDsByMediaID","Lookup","combineMaps","reduce","updateRestaurantsByID","updateMediaByID","mapMediaIDtoRestaurantID","updateRestaurantIDsByMediaID","updateLookup","existing","update","Storage","storage","key","silent","getItem","prop","setItem","removeItem","clear","debug","NullStorage","StorageFactory","localStorage","LikedMedia","data","liked","json","JSON","parse","restaurantID","Set","hydrate","setLiked","delete","unlikeMedia","add","likeMedia","serialize","set","stringify","has","pipe","fns","x","v","f","formatSearchURL","params","concat","encodeURIComponent","addDescription","addLocation","addDistance","get","likedMedia","getLikedMedia","getRestaurantIDByMediaID","updateSearchURL","setURL","getSelectedMediaInfo","selectedID","getMediaByID","getRestaurantByID","checkResponseForErrors","response","ok","Error","statusText","checkJSONForErrors","some","mediaCount","App","setRestaurants","selectedMediaID","setSelectedMediaID","setLikedMedia","setSearching","setError","fetch","then","scroll","top","left","behavior","catch","getAll","toggleLikedMedia","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.25a297dd.chunk.js","sourcesContent":["const DOMAIN = \"https://www.yelp.com\";\r\nconst LOCATION_SEARCH_PREFIX = DOMAIN + \"/search/snippet\";\r\n\r\nconst queryTypes = {\r\n\tLOCATION: 'location',\r\n\tCOORDINATE: 'coordinate'\r\n};\r\n\r\nconst url = {\r\n\tDOMAIN,\r\n\tLOCATION_SEARCH_PREFIX\r\n};\r\n\r\nconst distances = {\r\n\tUNKNOWN: 'unknown',\r\n\tBIRDS_EYE: 0,\r\n\tDRIVING: 1,\r\n\tBIKING: 2,\r\n\tWALKING: 3,\r\n\tBLOCKS: 4\r\n};\r\n\r\nexport default {\r\n\tqueryTypes,\r\n\turl,\r\n\tdistances\r\n};\r\n","import './Suggestions.css';\r\nimport { ListGroup, ListGroupItem } from 'reactstrap';\r\n\r\n/*\r\n The parent search form hides suggestions on blur events from the location input, removing this component from the DOM before the click handler of this component can fire.  To mitigate, prevent default on mousedown.\r\n*/\r\nfunction Suggestions({requestLocation}) {\r\n\treturn  (\r\n\t\t<ListGroup className=\"suggestions-list-group\" onMouseDown={e => e.preventDefault()}>\r\n\t\t\t<ListGroupItem tag=\"button\" onClick={requestLocation} action>\r\n\t\t\t\t<div className=\"current-location-container\">\r\n\t\t\t\t\t<img className=\"current-location-icon\" src=\"cursor-fill.svg\" />\r\n\t\t\t\t\t<span>Current Location</span>\r\n\t\t\t\t</div>\r\n\t\t\t</ListGroupItem>\r\n\t\t</ListGroup>\r\n\t);\r\n}\r\n\r\nexport default Suggestions;","import './SearchForm.css';\r\nimport { useState } from 'react';\r\nimport { InputGroup, InputGroupAddon, Input, Button } from 'reactstrap';\r\nimport Suggestions from './Suggestions/Suggestions';\r\n\r\nfunction SearchForm({onSearchRequest, description, setDescription, location, setLocation, requestingLocation, setRequestingLocation}) {\r\n\tconst [suggestionsOpen, setSuggestionsOpen] = useState(false);\r\n\r\n\tconst onDescriptionChange = (event) => {\r\n\t\tsetDescription(event.target.value);\r\n\t};\r\n\r\n\tconst onLocationChange = (event) => {\r\n\t\tconst location = event.target.value;\r\n\r\n\t\tif (location) {\r\n\t\t\thideSuggestions();\r\n\t\t}\r\n\r\n\t\tsetLocation(location);\r\n\t};\r\n  \t\r\n  \tconst toggleSuggestions = () => setSuggestionsOpen(prevState => !prevState);\r\n  \tconst hideSuggestions = () => setSuggestionsOpen(false);\r\n  \tconst getLocationIconSource = (requestingLocation) => requestingLocation ? \"spinner.png\" : \"target.svg\";\r\n  \t\r\n  \tconst requestLocation = (e) => {\r\n  \t\t// Prevent page refresh\r\n  \t\te.preventDefault();\r\n  \t\tconsole.log(\"Requesting location.\");\r\n  \t\tsetRequestingLocation(true);\r\n\t\thideSuggestions();\r\n  \t\tnavigator.geolocation.getCurrentPosition(\r\n\t\t\te => {\r\n\t\t\t\tconst { latitude, longitude } = e.coords;\r\n\t\t\t\tsetRequestingLocation(false);\r\n\t\t\t\tsetLocation(`${latitude.toPrecision(7)}, ${longitude.toPrecision(7)}`);\r\n\t\t\t},\r\n\t\t\te => {\r\n\t\t\t\tsetRequestingLocation(false);\r\n\t\t\t\tconsole.error(e);\r\n\t\t\t},\r\n\t\t\t{timeout: 10 * 1000, maximumAge: 60 * 1000});\r\n\t};\r\n\r\n\treturn (\r\n\t\t<form className=\"search-form\" onSubmit={(e) => onSubmit(e, onSearchRequest)}>\r\n\t\t\t<div className=\"input-group-container\">\r\n\t\t\t\t<InputGroup>\r\n\t\t\t\t\t<InputGroupAddon addonType=\"prepend\">\r\n\t\t\t\t\t\t<img className=\"input-icon query-icon\" src=\"magnifying-glass.svg\" />\r\n\t\t\t\t\t</InputGroupAddon>\r\n\t\t\t\t\t<Input className=\"search-input\" type=\"text\" value={description} onChange={onDescriptionChange} placeholder=\"e.g. Pizza\" />\r\n\t\t\t\t</InputGroup>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"input-group-container\">\r\n\t\t\t\t<InputGroup>\r\n\t\t\t\t\t<InputGroupAddon addonType=\"prepend\">\r\n\t\t\t\t\t\t<img className={`input-icon location-icon ${requestingLocation ? \"rotate\" : \"\"}`} src={getLocationIconSource(requestingLocation)} />\r\n\t\t\t\t\t</InputGroupAddon>\r\n\t\t\t\t\t<Input className=\"search-input\" type=\"text\" value={location} onChange={onLocationChange} onClick={toggleSuggestions}\r\n\t\t\t\t\t\tonBlur={hideSuggestions} placeholder=\"e.g. Brooklyn, NY 11237\" />\r\n\t\t\t\t</InputGroup>\r\n\t\t\t\t{suggestionsOpen && <Suggestions requestLocation={requestLocation} />}\r\n\t\t\t</div>\r\n\t\t\t<Button className=\"search-submit-button hidden-submit\" type=\"submit\" />\r\n\t\t</form>\r\n\t);\r\n}\r\n\r\nfunction onSubmit(e, onSearchRequest) {\r\n\te.preventDefault();\r\n\tconsole.log(\"onSubmit()\");\r\n\tonSearchRequest();\r\n}\r\n\r\nexport default SearchForm;\r\n","import './ShowLikedCheckbox.css';\nimport {FormGroup, Input, Label} from \"reactstrap\";\n\nfunction ShowLikedCheckbox({onChange}) {\n    return (\n        <FormGroup className={\"header-check filter-liked-check\"} check>\n            <Label check>\n                <Input type=\"checkbox\" onChange={e => onChange(e.target.checked)} />\n                <span className={\"header-check-text\"}>Show Liked</span>\n            </Label>\n        </FormGroup>\n    );\n}\n\nexport default ShowLikedCheckbox;","import './DistanceDropdown.css';\nimport { useState } from 'react';\nimport constants from '../../../../scrapers/yelp/constants';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\n\nconst { distances } = constants;\nconst dropdownTextContents = {\n    DEFAULT: \"Distance\",\n    options: [\n        \"Bird's-eye View\",\n        \"Driving (5 mi.)\",\n        \"Biking (2 mi.)\",\n        \"Walking (1 mi.)\",\n        \"Within 4 Blocks\"\n    ]\n};\n\nconst DistanceDropdown = ({distance, setDistance, onSearchRequest}) => {\n    const [isOpen, setIsOpen] = useState(false);\n    const toggle = () => setIsOpen(!isOpen);\n\n    return (\n        <Dropdown className=\"distance-dropdown\" isOpen={isOpen} toggle={toggle} size=\"sm\" outline={true} color=\"secondary\">\n            <DropdownToggle caret>{getDropdownText(distance)}</DropdownToggle>\n            <DropdownMenu positionFixed={true}>\n                <DropdownItem onClick={() => setDistance(distances.BLOCKS)}>Within 4 Blocks</DropdownItem>\n                <DropdownItem onClick={() => setDistance(distances.WALKING)}>Walking (1 mi.)</DropdownItem>\n                <DropdownItem onClick={() => setDistance(distances.BIKING)}>Biking (2 mi.)</DropdownItem>\n                <DropdownItem onClick={() => setDistance(distances.DRIVING)}>Driving (5 mi.)</DropdownItem>\n                <DropdownItem onClick={() => setDistance(distances.BIRDS_EYE)}>Bird's-eye View</DropdownItem>\n            </DropdownMenu>\n        </Dropdown>\n    );\n};\n\nfunction getDropdownText(distance) {\n    return (distance === distances.UNKNOWN)\n        ? dropdownTextContents.DEFAULT\n        : dropdownTextContents.options[distance];\n}\n\nexport default DistanceDropdown;\n","import './Header.css';\r\nimport { useState } from 'react';\r\nimport {\r\n\tCollapse,\r\n\tNavbar,\r\n\tNavbarToggler,\r\n\tNavbarBrand,\r\n\tNav,\r\n\tNavItem,\r\n\tNavLink\r\n} from 'reactstrap';\r\nimport SearchForm from './SearchForm/SearchForm';\r\nimport ShowLikedCheckbox from './ShowLikedCheckbox/ShowLikedCheckbox';\r\nimport DistanceDropdown from './DistanceDropdown/DistanceDropdown';\r\n\r\nfunction Header({onSearchRequest, description, setDescription, location, setLocation,\r\n\t\t\t\t\trequestingLocation, setRequestingLocation, setShowLiked, distance, setDistance}) {\r\n\tconst [isOpen, setIsOpen] = useState(false);\r\n\tconst toggle = () => setIsOpen(!isOpen);\r\n\r\n\treturn (\r\n\t\t<Navbar className=\"header-navbar\" color=\"light\" light expand=\"md\">\r\n\t\t\t<NavbarBrand href=\"/\">Gourmand</NavbarBrand>\r\n        \t<NavbarToggler onClick={toggle} />\r\n        \t<Collapse className=\"header-collapse\" in={true} isOpen={isOpen} timeout={200} navbar>\r\n        \t\t<Nav className=\"header-nav\" navbar>\r\n\t\t\t\t\t<NavItem>\r\n\t\t\t\t\t\t<NavLink href=\"#\">About</NavLink>\r\n\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t<NavItem>\r\n\t\t\t\t\t\t<NavLink href=\"#\">Contact</NavLink>\r\n\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t<NavItem>\r\n\t\t\t\t\t\t<NavLink href=\"#\">Log In</NavLink>\r\n\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t<NavItem className=\"nav-separator\" />\r\n\t\t\t\t\t<NavItem>\r\n\t\t\t\t\t\t<SearchForm description={description} setDescription={setDescription} location={location}\r\n\t\t\t\t\t\t\t\t\tsetLocation={setLocation} requestingLocation={requestingLocation} setRequestingLocation={setRequestingLocation}\r\n\t\t\t\t\t\t\t\t\tonSearchRequest={onSearchRequest} />\r\n\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t<NavItem className=\"dropdown-nav-item\">\r\n\t\t\t\t\t\t<DistanceDropdown distance={distance} setDistance={setDistance} onSearchRequest={onSearchRequest} />\r\n\t\t\t\t\t\t<ShowLikedCheckbox onChange={setShowLiked} />\r\n\t\t\t\t\t</NavItem>\r\n        \t\t</Nav>\r\n        \t</Collapse>\r\n\t\t</Navbar>\r\n\t);\r\n}\r\n\r\nexport default Header;","import Media from '../../domain/Media.js';\r\n\r\nclass YelpMedia extends Media {\r\n\r\n\tconstructor(id, type, caption, source) {\r\n\t\tsuper(id, type, caption, source);\r\n\t}\r\n\r\n\tgetThumbnailURLs() {\r\n\t\tconst stem = this.source.slice(0, -5);\r\n\r\n\t\treturn [\r\n\t\t\tstem + '258s.jpg',\r\n\t\t\tstem + '300s.jpg',\r\n\t\t\tstem + '348s.jpg'\r\n\t\t];\r\n\t}\r\n\r\n}\r\n\r\nexport default YelpMedia","import _ from'underscore';\r\n\r\nexport default class Media {\r\n\r\n\tconstructor(id, type, caption, source) {\r\n\t\tthis.id = id;\r\n\t\tthis.type = type;\r\n\t\tthis.caption = caption;\r\n\t\tthis.source = source;\r\n\t}\r\n\r\n\ttoJSON() {\r\n\t\treturn _.pick(this, 'id', 'type', 'caption', 'source');\r\n\t}\r\n\r\n\tpopulateFromBSON(bson) {\r\n\t\tconst { id, type, caption, source } = bson;\r\n\r\n\t\tthis.id = id;\r\n\t\tthis.type = type;\r\n\t\tthis.caption = caption;\r\n\t\tthis.source = source;\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n}\r\n","export default (width, height, color, className, onClick = () => {}) => {\r\n\treturn (\r\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width={width} height={height} fill={color} className={className} onClick={onClick} viewBox=\"0 0 16 16\">\r\n\t\t  <path d=\"M4 1c2.21 0 4 1.755 4 3.92C8 2.755 9.79 1 12 1s4 1.755 4 3.92c0 3.263-3.234 4.414-7.608 9.608a.513.513 0 0 1-.784 0C3.234 9.334 0 8.183 0 4.92 0 2.755 1.79 1 4 1z\"/>\r\n\t\t</svg>\r\n\t);\r\n}","import './GalleryMedia.css';\r\nimport getLikedMediaIcon from '../../../utils/getLikedMediaIcon';\r\n\r\nconst delays = [50, 250, 500, 750, 1000];\r\n\r\nconst GalleryMedia = ({ media, onMediaSelection, isLiked, searching }) => {\r\n\tconst delayIndex = Math.floor(Math.random() * delays.length);\r\n\tconst delay = delays[delayIndex];\r\n\treturn (\r\n\t\t<div className={`food-thumbnail-container transition-delay-${delay}`}>\r\n\t\t\t<img className=\"food-thumbnail\" src={media.getThumbnailURLs()[0]} onClick={() => onMediaSelection(media.id)} />\r\n\t\t\t{ isLiked && getLikedMediaIcon(\"16\", \"16\", \"white\", \"liked-media-icon\") }\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default GalleryMedia;\r\n","import './SearchCurtain.css';\r\nimport { Spinner } from 'reactstrap';\r\n\r\nconst SearchCurtain = ({ color }) => {\r\n\treturn (\r\n\t\t<div className=\"search-curtain\">\r\n\t\t\t<div className=\"search-curtain-backdrop\"></div>\r\n\t\t\t<Spinner className=\"search-curtain-spinner\" color={color} />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default SearchCurtain;\r\n","import './Gallery.css';\r\nimport { useState, useEffect } from 'react';\r\nimport _ from 'underscore';\r\nimport YelpMedia from '../../../scrapers/yelp/YelpMedia';\r\nimport GalleryMedia from './GalleryMedia/GalleryMedia';\r\nimport SearchCurtain from './SearchCurtain/SearchCurtain';\r\nimport { CSSTransition } from \"react-transition-group\";\r\n\r\nconst Gallery = ({restaurants, onMediaSelection, isLikedMedia, searching, showLiked}) => {\r\n\t// console.log(\"media:\", media);\r\n\tconst [canShuffleMedia, setCanShuffleMedia] = useState(true);\r\n\tconst [shuffledMedia, setShuffledMedia] = useState([]);\r\n\tconst [canEnter, setCanEnter] = useState(true);\r\n\tconst color = restaurants.length ? \"light\" : \"dark\";\r\n\tconst canRender = !searching && canEnter;\r\n\tconst renderedMedia = filterLiked(shuffledMedia, showLiked, isLikedMedia);\r\n\tconst onExited = () => {\r\n\t\tsetCanShuffleMedia(true);\r\n\t\tsetCanEnter(true);\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tsetCanShuffleMedia(canRender);\r\n\t}, [searching, canEnter])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (canShuffleMedia) {\r\n\t\t\tsetShuffledMedia(getShuffledMedia(restaurants));\r\n\t\t}\r\n\t}, [canShuffleMedia]);\r\n\r\n\treturn (\r\n\t\t<CSSTransition classNames={\"thumbnail-swap\"} in={canRender} appear={true} timeout={2000} onExit={() => setCanEnter(false)} onExited={onExited}>\r\n\t\t\t<div className=\"gallery-container\">\r\n\t\t\t\t{renderedMedia.map((media, i) => (\r\n\t\t\t\t\t<GalleryMedia key={i} searching={searching} media={media} onMediaSelection={onMediaSelection} isLiked={isLikedMedia(media.id)} />\r\n\t\t\t\t))}\r\n\t\t\t\t{ searching && <SearchCurtain color={color} />}\r\n\t\t\t</div>\r\n\t\t</CSSTransition>\r\n\t);\r\n};\r\n\r\nfunction filterLiked(media, showLiked, isLikedMedia) {\r\n\treturn showLiked ? media.filter(media => isLikedMedia(media.id)) : media;\r\n}\r\n\r\nfunction getShuffledMedia(restaurants) {\r\n\tconsole.log(\"restaurants:\", restaurants);\r\n\tconst allMedia = restaurants.flatMap(restaurant => restaurant.media);\r\n\tconsole.log(\"allMedia:\", allMedia);\r\n\tconst shuffledMedia = _.shuffle(allMedia);\r\n\t// console.log(\"shuffledMedia:\", shuffledMedia);\r\n\treturn shuffledMedia.map(media => (new YelpMedia().populateFromBSON(media)));\r\n}\r\n\r\nexport default Gallery;\r\n","import './ErrorMessage.css';\r\n\r\nconst ErrorMessage = ({error}) => {\r\n\treturn (\r\n\t\t<div className=\"error-message-container\">\r\n\t\t\t<div className=\"error-apology\">Oops, something went sour.</div>\r\n\t\t\t<div className=\"error-message\">\"{error.message}\"</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ErrorMessage;","export default (width, height, color, className, onClick = () => {}) => {\r\n\treturn (\r\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width={width} height={height} fill={color} className={className} onClick={onClick} viewBox=\"0 0 16 16\">\r\n\t\t  <path d=\"M8 6.236l-.894-1.789c-.222-.443-.607-1.08-1.152-1.595C5.418 2.345 4.776 2 4 2 2.324 2 1 3.326 1 4.92c0 1.211.554 2.066 1.868 3.37.337.334.721.695 1.146 1.093C5.122 10.423 6.5 11.717 8 13.447c1.5-1.73 2.878-3.024 3.986-4.064.425-.398.81-.76 1.146-1.093C14.446 6.986 15 6.131 15 4.92 15 3.326 13.676 2 12 2c-.777 0-1.418.345-1.954.852-.545.515-.93 1.152-1.152 1.595L8 6.236zm.392 8.292a.513.513 0 0 1-.784 0c-1.601-1.902-3.05-3.262-4.243-4.381C1.3 8.208 0 6.989 0 4.92 0 2.755 1.79 1 4 1c1.6 0 2.719 1.05 3.404 2.008.26.365.458.716.596.992a7.55 7.55 0 0 1 .596-.992C9.281 2.049 10.4 1 12 1c2.21 0 4 1.755 4 3.92 0 2.069-1.3 3.288-3.365 5.227-1.193 1.12-2.642 2.48-4.243 4.38z\"/>\r\n\t\t</svg>\r\n\t);\r\n}","import './MediaModal.css';\r\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\r\nimport getUnlikedMediaIcon from '../../utils/getUnlikedMediaIcon';\r\nimport getLikedMediaIcon from '../../utils/getLikedMediaIcon';\r\n\r\nfunction formatCaption(caption) {\r\n\treturn caption ? `\"${caption}\"` : \"[ No Caption ]\";\r\n}\r\n\r\nfunction onAddressClick(e, address) {\r\n\te.preventDefault();\r\n\topenInNewTab(formatMapLink(address));\r\n}\r\n\r\nfunction openInNewTab(url) {\r\n\tconst win = window.open(url, '_blank');\r\n\twin.focus();\r\n}\r\n\r\nfunction formatMapLink(address) {\r\n\treturn \"https://www.google.com/maps/place/\" + address.join(\" \").replace(\" \", \"+\");\r\n}\r\n\r\nfunction MediaModal({selected, onMediaLikeToggle, onClose, isLiked}) {\r\n\tconsole.log(\"selected:\", selected);\r\n\tconst {media, restaurant} = selected;\r\n\tconst {source, caption} = media;\r\n\tconst {name, address, neighborhoods, categories, rating} = restaurant;\r\n\tconst onIconClick = () => onMediaLikeToggle(media.id);\r\n\r\n\treturn (\r\n\t\t<Modal isOpen={!!selected} toggle={onClose} className=\"media-modal-container\">\r\n\t\t\t<ModalHeader toggle={onClose}>\r\n\t\t\t\t<div className=\"caption\">{formatCaption(caption)}</div>\r\n\t\t\t</ModalHeader>\r\n\t\t\t<ModalBody>\r\n\t\t\t\t<div className=\"modal-info-container\">\r\n\t\t\t\t\t<div className=\"modal-image-container\">\r\n\t\t\t\t\t\t<img className=\"food-media modal-image\" src={source} />\r\n\t\t\t\t\t\t{ isLiked ? getLikedMediaIcon(\"32\", \"32\", \"white\", \"liked-media-icon\", onIconClick) : getUnlikedMediaIcon(\"32\", \"32\", \"white\", \"unliked-media-icon\", onIconClick) }\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"restaurant-details-container\">\r\n\t\t\t\t\t\t{name && <div className=\"restaurant-name\">{name}</div>}\r\n\t\t\t\t\t\t{address && <a onClick={e => onAddressClick(e, address)} className=\"restaurant-address\">{address.join(\" \")}</a>}\r\n\t\t\t\t\t\t{neighborhoods && <div className=\"restaurant-neighborhoods\">{neighborhoods.join(\", \")}</div>}\r\n\t\t\t\t\t\t{categories && <div className=\"restaurant-categories\">{categories.join(\", \")}</div>}\r\n\t\t\t\t\t\t{rating && <div className=\"restaurant-rating\">{rating}</div>}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t        </ModalBody>\r\n\t        <ModalFooter>\r\n\t\t\t\t<Button color=\"secondary\" onClick={onClose}>Close</Button>\r\n\t\t\t</ModalFooter>\r\n\t\t</Modal>\r\n\t);\r\n}\r\n\r\nexport default MediaModal;\r\n","/*\r\n * Lookup\r\n */\r\n const lookup = { \r\n \trestaurantsByID: {}, \r\n \tmediaByID: {}, \r\n \trestaurantIDsByMediaID: {} \r\n };\r\n\r\nexport default class Lookup {\r\n\tupdate(restaurants) {\r\n\t\tupdateLookup(lookup, restaurants);\r\n\t}\r\n\r\n\tgetMediaByID(id) {\r\n\t\treturn lookup.mediaByID[id];\r\n\t}\r\n\r\n\tgetRestaurantByID(id) {\r\n\t\treturn lookup.restaurantsByID[id];\r\n\t}\r\n\r\n\tgetRestaurantIDByMediaID(id) {\r\n\t\treturn lookup.restaurantIDsByMediaID[id];\r\n\t}\r\n};\r\n\r\nfunction updateLookup(lookup, restaurants) {\r\n\tlookup.restaurantsByID = combineMaps(lookup.restaurantsByID, updateRestaurantsByID(restaurants));\r\n\tlookup.mediaByID = combineMaps(lookup.mediaByID, updateMediaByID(restaurants));\r\n\tlookup.restaurantIDsByMediaID = combineMaps(lookup.restaurantIDsByMediaID, updateRestaurantIDsByMediaID(restaurants));\r\n}\r\n\r\nfunction updateRestaurantsByID(restaurants) {\r\n\treturn restaurants.reduce((map, restaurant) => {\r\n\t\tmap[restaurant.id] = restaurant;\r\n\t\treturn map;\r\n\t}, {});\r\n}\r\n\r\nfunction updateMediaByID(restaurants) {\r\n\treturn restaurants\r\n\t\t.flatMap(restaurant => restaurant.media)\r\n\t\t.reduce((map, media) => {\r\n\t\t\tmap[media.id] = media;\r\n\t\t\treturn map;\r\n\t\t}, {});\r\n}\r\n\r\nfunction updateRestaurantIDsByMediaID(restaurants) {\r\n\treturn restaurants.reduce((map, restaurant) => (combineMaps(map, mapMediaIDtoRestaurantID(restaurant))), {});\r\n}\r\n\r\nfunction mapMediaIDtoRestaurantID(restaurant) {\r\n\treturn restaurant.media\r\n\t\t.reduce((map, media) => {\r\n\t\t\tmap[media.id] = restaurant.id;\r\n\t\t\treturn map;\r\n\t\t}, {});\r\n}\r\n\r\nfunction combineMaps(existing, update) {\r\n\treturn { ...existing, ...update };\r\n}","/*\r\n * Storage\r\n *\r\n * Facade for storage mechanism (e.g. localStorage) \r\n */\r\nexport default class Storage {\r\n\r\n\tconstructor(storage) {\r\n\t\tthis.storage = storage;\r\n\t}\r\n\r\n\tget(key) {\r\n\t\treturn silent(() => this.storage.getItem(key));\r\n\t}\r\n\r\n\tset(key, prop) {\r\n\t\treturn silent(() => this.storage.setItem(key, prop));\r\n\t}\r\n\r\n\tremove(key) {\r\n\t\treturn silent(() => this.storage.removeItem(key));\r\n\t}\r\n\r\n\tremoveAll() {\r\n\t\treturn silent(() => this.storage.clear());\r\n\t}\r\n\r\n}\r\n\r\n/*\r\n * Utility Functions\r\n */\r\nfunction silent(action) {\r\n\ttry {\r\n\t\treturn action();\r\n\t} catch (e) {\r\n\t\twindow.console.debug(\"Storage Exception:\", e);\r\n\t}\r\n}\r\n","/*\r\n * NullStorage\r\n *\r\n * Class returned by 'StorageFactory' if there is no local storage.\r\n */\r\nexport default class NullStorage {\r\n\tget() {}\r\n\tset() {}\r\n\tremove() {}\r\n\tremoveAll() {}\r\n}\r\n","import Storage from './Storage.js';\r\nimport NullStorage from './NullStorage.js';\r\n\r\nexport default class StorageFactory {\r\n\r\n\tget(localStorage) {\r\n\t\treturn localStorage ? new Storage(localStorage) : new NullStorage();\r\n\t}\r\n\r\n}\r\n","/*\r\n\r\n// User: data\r\n{\r\n\tliked: {\r\n\t\t[restaurant id]: Set<id>\r\n\t}\r\n}\r\n\r\n*/\r\nexport default class LikedMedia {\r\n\r\n\tconstructor(data, storage) {\r\n\t\tthis.liked = setLiked(data);\r\n\t\tthis.storage = storage;\r\n\t}\r\n\r\n\ttoggle(restaurantID, id) {\r\n\t\tconst liked = { ...this.liked };\r\n\r\n\t\tthis.liked = isLiked(liked, restaurantID, id)\r\n\t\t\t? unlikeMedia(liked, restaurantID, id)\r\n\t\t\t: likeMedia(liked, restaurantID, id);\r\n\r\n\t\t// TODO: Set up event mechanism for updating storage\r\n\t\tupdateStorage(this.storage, this.serialize());\r\n\t}\r\n\r\n\tgetAll() {\r\n\t\treturn this.liked;\r\n\t}\r\n\r\n\tisLiked(restaurantID, id) {\r\n\t\treturn isLiked(this.liked, restaurantID, id);\r\n\t}\r\n\r\n\tserialize() {\r\n\t\tconst json = {};\r\n\r\n\t\tfor (const restaurantID in this.liked) {\r\n\t\t\tjson[restaurantID] = [...this.liked[restaurantID]];\r\n\t\t}\r\n\r\n\t\treturn JSON.stringify(json);\r\n\t}\r\n}\r\n\r\n/*\r\n * Utility Functions\r\n */\r\nfunction setLiked(data) {\r\n\tif (!(data))\r\n\t\treturn {};\r\n\r\n\t// Assume data is pre-hydrated object if not string\r\n\treturn (typeof data === 'string') ? hydrate(data) : data;\r\n}\r\n\r\nfunction isLiked(liked, restaurantID, id) {\r\n\treturn (restaurantID in liked)\r\n\t\t&& liked[restaurantID].has(id);\r\n}\r\n\r\nfunction likeMedia(liked, restaurantID, id) {\r\n\tif (!(restaurantID in liked)) {\r\n\t\t\tliked[restaurantID] = new Set();\r\n\t}\r\n\r\n\tliked[restaurantID].add(id);\r\n\r\n\treturn liked;\r\n}\r\n\r\nfunction unlikeMedia(liked, restaurantID, id) {\r\n\tliked[restaurantID].delete(id);\r\n\r\n\tif (liked[restaurantID].size === 0) {\r\n\t\tdelete liked[restaurantID];\r\n\t}\r\n\r\n\treturn liked;\r\n}\r\n\r\nfunction updateStorage(storage, data) {\r\n\tstorage.set('likedMedia', data);\r\n}\r\n\r\nfunction hydrate(data) {\r\n\tconst json = JSON.parse(data);\r\n\r\n\tfor (const restaurantID in json) {\r\n\t\tjson[restaurantID] = new Set(json[restaurantID]);\r\n\t}\r\n\r\n\treturn json;\r\n}\r\n","const pipe = (...fns) => (x) => fns.reduce((v, f) => f(v), x);\n\nexport default pipe;\n","import constants from '../scrapers/yelp/constants';\nimport pipe from '../utils/pipe';\n\nconst { distances } = constants;\n\nconst formatSearchURL = (url, {description, location, distance}) => {\n    return [\n        url,\n        pipe(\n            params => addDescription(description, params),\n            params => addLocation(location, params),\n            params => addDistance(distance, params)\n        )([]).join(\"&\")\n    ].join(\"?\");\n};\n\nfunction addDescription(description, params) {\n    return params.concat(`description=${encodeURIComponent(description)}`);\n}\n\nfunction addLocation(location, params) {\n    return params.concat(`location=${encodeURIComponent(location)}`);\n}\n\nfunction addDistance(distance, params) {\n    return (distance && (distance !== distances.UNKNOWN))\n        ? params.concat(`distance=${encodeURIComponent(distance)}`)\n        : params;\n}\n\nexport default formatSearchURL;\n","import './App.css';\nimport { useState, useEffect } from 'react';\nimport constants from '../../scrapers/yelp/constants';\nimport Header from './Header/Header';\nimport Gallery from './Gallery/Gallery';\nimport ErrorMessage from './ErrorMessage/ErrorMessage';\nimport MediaModal from './MediaModal/MediaModal';\nimport Lookup from '../../lookup/Lookup';\nimport StorageFactory from '../../storage/StorageFactory';\nimport LikedMedia from '../../user/LikedMedia';\nimport formatSearchURL from '../../search/formatSearchURL';\n\nconst { distances } = constants;\nconst lookup = new Lookup();\nconst storage = new StorageFactory().get(window.localStorage);\nconst likedMedia = new LikedMedia(getLikedMedia(storage), storage);\n\nfunction getLikedMedia(storage) {\n\ttry {\n\t\treturn storage.get('likedMedia');\n\t} catch (e) {\n\t\twindow.console.debug(e);\n\t}\n}\n\nfunction isLikedMedia(id) {\n\treturn id && likedMedia.isLiked(lookup.getRestaurantIDByMediaID(id), id);\n}\n\nfunction toggleLikedMedia(id, setLikedMedia) {\n\tlikedMedia.toggle(lookup.getRestaurantIDByMediaID(id), id);\n\tsetLikedMedia(likedMedia.getAll());\n}\n\nfunction updateSearchURL({description, location, distance}, setURL) {\n\tconsole.log(\"updateSearchURL()\");\n\tconsole.log(\"description:\", description);\n\tconsole.log(\"location:\", location);\n\tconsole.log(\"distance:\", distance);\n\n\tif (!location)\n\t\treturn;\n\n\tconst url = formatSearchURL('/search', {description, location, distance});\n\tconsole.log(\"url:\", url);\n\treturn setURL(url);\n}\n\nfunction getSelectedMediaInfo(selectedID, lookup) {\n\tconst media = lookup.getMediaByID(selectedID);\n\tconst restaurant = lookup.getRestaurantByID(lookup.getRestaurantIDByMediaID(selectedID));\n\treturn { media, restaurant };\n}\n\nfunction checkResponseForErrors(response) {\n\tif (response.ok) {\n\t\treturn response;\n\t}\n\n\tthrow new Error(response.statusText);\n}\n\nfunction checkJSONForErrors(restaurants) {\n\tconst hasMedia = restaurants.some(restaurant => restaurant.mediaCount > 0);\n\n\tif (hasMedia) {\n\t\treturn restaurants;\n\t}\n\n\tthrow new Error(\"Nothing to see here.\");\n}\n\nfunction scrollToTop() {\n\twindow.scroll({\n\t\ttop: 0,\n\t\tleft: 0,\n\t\tbehavior: 'smooth'\n\t});\n}\n\nfunction App() {\n\tconst [url, setURL] = useState('');\n\tconst [restaurants, setRestaurants] = useState([]);\n\tconst [description, setDescription] = useState('');\n\tconst [location, setLocation] = useState('');\n\tconst [requestingLocation, setRequestingLocation] = useState(false);\n\tconst [selectedMediaID, setSelectedMediaID] = useState('');\n\tconst [likedMedia, setLikedMedia] = useState({});\n\tconst [searching, setSearching] = useState(false);\n\tconst [error, setError] = useState(null);\n\tconst [distance, setDistance] = useState(distances.UNKNOWN);\n\tconst [showLiked, setShowLiked] = useState(false);\n\n\t// console.log(\"selectedMediaID:\", selectedMediaID);\n\tuseEffect(() => {\n\t\tif (url) {\n\t\t\tconsole.log(\"Making request:\", url);\n\t\t\tsetError(null);\n\t\t\tsetSearching(true);\n\n\t\t\tfetch(url)\n\t\t\t\t.then(checkResponseForErrors)\n\t\t\t\t.then(response => response.json())\n\t\t\t\t.then(checkJSONForErrors)\n\t\t\t\t.then(json => {\n\t\t\t\t\tlookup.update(json);\n\t\t\t\t\tconsole.log(\"lookup:\", lookup);\n\t\t\t\t\tsetRestaurants(json);\n\t\t\t\t\tsetSearching(false);\n\t\t\t\t\tscrollToTop();\n\t\t\t\t})\n\t\t\t\t.catch(e => setError(e));\n\t\t}\n\t}, [url])\n\n\tuseEffect(() => {\n\t\tupdateSearchURL({description, location, distance}, setURL);\n\t}, [distance]);\n\n\treturn (\n\t\t<div className=\"app\">\n\t\t\t<Header onSearchRequest={() => updateSearchURL({description, location, distance}, setURL)} description={description}\n\t\t\t\t\tsetDescription={setDescription} location={location} setLocation={setLocation} requestingLocation={requestingLocation}\n\t\t\t\t\tsetRequestingLocation={setRequestingLocation} setShowLiked={setShowLiked} distance={distance} setDistance={setDistance} />\n\t\t\t{selectedMediaID && <MediaModal selected={getSelectedMediaInfo(selectedMediaID, lookup)} onMediaLikeToggle={(id) => toggleLikedMedia(id, setLikedMedia)} onClose={() => setSelectedMediaID('')} isLiked={isLikedMedia(selectedMediaID)} />}\n\t\t\t{error ? <ErrorMessage error={error} /> : <Gallery restaurants={restaurants} onMediaSelection={setSelectedMediaID} isLikedMedia={isLikedMedia} searching={searching} showLiked={showLiked} />}\n\t\t</div>\n\t);\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './index.css';\nimport App from './components/App/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}